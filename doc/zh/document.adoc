= 详细文档

快速启动是一个简单示例，如果你想进行更详细的配置可以参考本文档


== 一个完整的流程图

image::../images/publish-flow.png[]

本文档会根据流程图进行说明

== 1. Generate

这一步的目的是生成一个符合 Maven 标准的 Metadata. 

Medivh-Publish封装了Gradle官方的link:https://docs.gradle.org/current/userguide/publishing_maven.html[maven-publish] 插件实现这个功能


如果你没有引入这个插件，Medivh-publisher 会自动帮你引入，你不需要做任何配置。

在Sonatype的 link:https://central.sonatype.org/publish/requirements[官方文档]中，要求发布的Pom Xml中需要含有如下配置：


|===
|配置 |是否必须 |描述

|link:https://central.sonatype.org/publish/requirements/#supply-javadoc-and-sources[源码和文档] |否 | 如果不上传，在IDE中无法下载源码
|link:https://central.sonatype.org/publish/requirements/#provide-files-checksums[校验和签名] |是 | 用于文件校验，后文会详细说明
|link:https://central.sonatype.org/publish/requirements/#correct-coordinates[正确的坐标] |是 | 上传工件的唯一标识 "com.example:my-library:1.0.0"
|link:https://central.sonatype.org/publish/requirements/#project-name-description-and-url[项目信息] |是 | 包含name,description,url三个属性
|link:https://central.sonatype.org/publish/requirements/#license-information[开源协议] |是 | 
|link:https://central.sonatype.org/publish/requirements/#scm-information[scm信息] |是 | 关于版本控制的信息
|===

=== 1.1 源码和文档
``Medivh-Publish``默认会增加源码和文档的上传，如果你不需要可以在build.gradle配置关闭：

[source,kotlin]
----
medivhPublisher{
    withoutJavaDocJar()
    withoutSourcesJar()
}
----

默认配置相当于:

[source,kotlin]
----
java {
    withJavadocJar()
    withSourcesJar()
}
----

=== 1.2 校验和签名

此配置的目的得到Maven所需的签名文件

Medivh-Publish 封装了Gradle官方的 link:https://docs.gradle.org/current/userguide/signing_plugin.html#signing_plugin[signing] 插件实现这个功能，一般来说不用特殊配置

=== 1.3 正确的坐标
此配置最终是用户在引用你的库时需要的坐标，例如： ``com.example:my-library:1.0.0``

Medivh-Publish 默认的配置是

``groupId = project.group``  

``artifactId = project.name``   

``version = project.version``  


=== 1.4 项目信息 

项目信息包含name,description,url三个属性

Medivh-Publish默认会把
`name = project.name`
`description = project.description`


== maven-publish 插件



